<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Data - Appvora.io</title>
    <link rel="stylesheet" href="style.css">
    <script>
        if (!localStorage.getItem("isLoggedIn") || localStorage.getItem("isAdmin") !== "true") {
            alert("Access Denied: Admins only.");
            window.location.href = "admin_login.html";
        }
    </script>
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="logo/logo.jpg" alt="logo">
            <span>Appvora.io - Admin</span>
        </div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <button onclick="home()" class="logout-btn">Back to Home</button>
            <button onclick="logout()" class="logout-btn">Logout</button>
        </div>
    </header>

    <main class="container">
        <h2>Registered User Credentials</h2>
        <table class="user-table">
            <thead>
                <tr>
                    <th>Email / Username</th>
                    <th>Password</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="user-data-body">
            </tbody>
        </table>
    </main>

    <footer class="footer">
        <p>&copy; 2026 Appvora.io. All rights reserved.</p>
    </footer>

    <script>
        const userDataBody = document.getElementById('user-data-body');

        function renderTable() {
            const users = JSON.parse(localStorage.getItem('users')) || [];

            if (users.length === 0) {
                userDataBody.innerHTML = '<tr><td colspan="3" style="text-align: center;">No user data found.</td></tr>';
            } else {
                userDataBody.innerHTML = users.map((user, index) => {
                    return `<tr><td>${user.email}</td><td>${user.password}</td><td><button onclick="deleteUser(${index})" style="background: #ff4444; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Delete</button></td></tr>`;
                }).join('');
            }
        }

        function deleteUser(index) {
            if (confirm("Are you sure you want to delete this user?")) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                users.splice(index, 1);
                localStorage.setItem('users', JSON.stringify(users));
                renderTable();
            }
        }

        function logout() {
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("isAdmin");
            window.location.href = "admin_login.html";
        }
        
        function home() {
            window.location.href = "home.html";
        }

        renderTable();
    </script>
</body>
</html>